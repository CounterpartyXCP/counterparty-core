import json

SCENARIO = [
    {
        "title": "Double send",
        "transaction": "multiple",
        "source": "",
        "params": {
            "json_txs": json.dumps(
                {
                    "transactions": [
                        {
                            "name": "send",
                            "params": {
                                "address": "$ADDRESS_1",
                                "destination": "$ADDRESS_2",
                                "asset": "XCP",
                                "quantity": 1,
                            },
                        },
                        {
                            "name": "send",
                            "params": {
                                "address": "$ADDRESS_1",
                                "destination": "$ADDRESS_2",
                                "asset": "MYASSETA",
                                "quantity": 1,
                            },
                        },
                    ],
                }
            ),
        },
        "controls": [
            {
                "url": "blocks/141/events?event_name=ENHANCED_SEND,DEBIT,CREDIT",
                "result": [
                    {
                        "event": "ENHANCED_SEND",
                        "event_index": 243,
                        "params": {
                            "asset": "MYASSETA",
                            "block_index": 141,
                            "destination": "$ADDRESS_2",
                            "memo": None,
                            "msg_index": 1,
                            "quantity": 1,
                            "source": "$ADDRESS_1",
                            "status": "valid",
                            "tx_hash": "$TX_HASH",
                            "tx_index": 28,
                        },
                        "tx_hash": "$TX_HASH",
                    },
                    {
                        "event": "CREDIT",
                        "event_index": 242,
                        "params": {
                            "address": "$ADDRESS_2",
                            "asset": "MYASSETA",
                            "block_index": 141,
                            "calling_function": "send",
                            "event": "$TX_HASH",
                            "quantity": 1,
                            "tx_index": 28,
                            "utxo": None,
                            "utxo_address": None,
                        },
                        "tx_hash": "$TX_HASH",
                    },
                    {
                        "event": "DEBIT",
                        "event_index": 241,
                        "params": {
                            "action": "send",
                            "address": "$ADDRESS_1",
                            "asset": "MYASSETA",
                            "block_index": 141,
                            "event": "$TX_HASH",
                            "quantity": 1,
                            "tx_index": 28,
                            "utxo": None,
                            "utxo_address": None,
                        },
                        "tx_hash": "$TX_HASH",
                    },
                    {
                        "event": "ENHANCED_SEND",
                        "event_index": 240,
                        "params": {
                            "asset": "XCP",
                            "block_index": 141,
                            "destination": "$ADDRESS_2",
                            "memo": None,
                            "msg_index": 0,
                            "quantity": 1,
                            "source": "$ADDRESS_1",
                            "status": "valid",
                            "tx_hash": "$TX_HASH",
                            "tx_index": 28,
                        },
                        "tx_hash": "$TX_HASH",
                    },
                    {
                        "event": "CREDIT",
                        "event_index": 239,
                        "params": {
                            "address": "$ADDRESS_2",
                            "asset": "XCP",
                            "block_index": 141,
                            "calling_function": "send",
                            "event": "$TX_HASH",
                            "quantity": 1,
                            "tx_index": 28,
                            "utxo": None,
                            "utxo_address": None,
                        },
                        "tx_hash": "$TX_HASH",
                    },
                    {
                        "event": "DEBIT",
                        "event_index": 238,
                        "params": {
                            "action": "send",
                            "address": "$ADDRESS_1",
                            "asset": "XCP",
                            "block_index": 141,
                            "event": "$TX_HASH",
                            "quantity": 1,
                            "tx_index": 28,
                            "utxo": None,
                            "utxo_address": None,
                        },
                        "tx_hash": "$TX_HASH",
                    },
                ],
            },
        ],
    },
    {
        "title": "Open XCP sell for BTC",
        "transaction": "order",
        "source": "$ADDRESS_1",
        "params": {
            "give_asset": "XCP",
            "give_quantity": 150000,
            "get_asset": "BTC",
            "get_quantity": 150000,
            "expiration": 10,
            "fee_required": 0,
        },
        "set_variables": {"ORDER_1_HASH": "$TX_HASH"},
        "controls": [
            {
                "url": "blocks/142/events?event_name=OPEN_ORDER,DEBIT",
                "result": [
                    {
                        "event": "OPEN_ORDER",
                        "event_index": 249,
                        "params": {
                            "block_index": 142,
                            "expiration": 10,
                            "expire_index": 152,
                            "fee_provided": 9921,
                            "fee_provided_remaining": 9921,
                            "fee_required": 0,
                            "fee_required_remaining": 0,
                            "get_asset": "BTC",
                            "get_quantity": 150000,
                            "get_remaining": 150000,
                            "give_asset": "XCP",
                            "give_quantity": 150000,
                            "give_remaining": 150000,
                            "source": "$ADDRESS_1",
                            "status": "open",
                            "tx_hash": "$TX_HASH",
                            "tx_index": 29,
                        },
                        "tx_hash": "$TX_HASH",
                    },
                    {
                        "event": "DEBIT",
                        "event_index": 248,
                        "params": {
                            "action": "open order",
                            "address": "$ADDRESS_1",
                            "asset": "XCP",
                            "block_index": 142,
                            "event": "$TX_HASH",
                            "quantity": 150000,
                            "tx_index": 29,
                            "utxo": None,
                            "utxo_address": None,
                        },
                        "tx_hash": "$TX_HASH",
                    },
                ],
            }
        ],
    },
    {
        "title": "Match order",
        "transaction": "order",
        "source": "$ADDRESS_2",
        "params": {
            "give_asset": "BTC",
            "give_quantity": 110000,
            "get_asset": "XCP",
            "get_quantity": 110000,
            "expiration": 10,
            "fee_required": 0,
        },
        "set_variables": {"ORDER_2_HASH": "$TX_HASH"},
        "controls": [
            {
                "url": "blocks/143/events?event_name=ORDER_MATCH,ORDER_UPDATE,OPEN_ORDER",
                "result": [
                    {
                        "event": "ORDER_MATCH",
                        "event_index": 257,
                        "params": {
                            "backward_asset": "BTC",
                            "backward_quantity": 110000,
                            "block_index": 143,
                            "fee_paid": 0,
                            "forward_asset": "XCP",
                            "forward_quantity": 110000,
                            "id": "$ORDER_1_HASH_$TX_HASH",
                            "match_expire_index": 163,
                            "status": "pending",
                            "tx0_address": "$ADDRESS_1",
                            "tx0_block_index": 142,
                            "tx0_expiration": 10,
                            "tx0_hash": "$ORDER_1_HASH",
                            "tx0_index": 29,
                            "tx1_address": "$ADDRESS_2",
                            "tx1_block_index": 143,
                            "tx1_expiration": 10,
                            "tx1_hash": "$TX_HASH",
                            "tx1_index": 30,
                        },
                        "tx_hash": "$TX_HASH",
                    },
                    {
                        "event": "ORDER_UPDATE",
                        "event_index": 256,
                        "params": {
                            "fee_provided_remaining": 10823,
                            "fee_required_remaining": 0,
                            "get_remaining": 0,
                            "give_remaining": 0,
                            "status": "open",
                            "tx_hash": "$TX_HASH",
                        },
                        "tx_hash": "$TX_HASH",
                    },
                    {
                        "event": "ORDER_UPDATE",
                        "event_index": 255,
                        "params": {
                            "fee_provided_remaining": 9921,
                            "fee_required_remaining": 0,
                            "get_remaining": 40000,
                            "give_remaining": 40000,
                            "status": "open",
                            "tx_hash": "$ORDER_1_HASH",
                        },
                        "tx_hash": "$TX_HASH",
                    },
                    {
                        "event": "OPEN_ORDER",
                        "event_index": 254,
                        "params": {
                            "block_index": 143,
                            "expiration": 10,
                            "expire_index": 153,
                            "fee_provided": 10823,
                            "fee_provided_remaining": 10823,
                            "fee_required": 0,
                            "fee_required_remaining": 0,
                            "get_asset": "XCP",
                            "get_quantity": 110000,
                            "get_remaining": 110000,
                            "give_asset": "BTC",
                            "give_quantity": 110000,
                            "give_remaining": 110000,
                            "source": "$ADDRESS_2",
                            "status": "open",
                            "tx_hash": "$TX_HASH",
                            "tx_index": 30,
                        },
                        "tx_hash": "$TX_HASH",
                    },
                ],
            }
        ],
    },
    {
        "title": "Pay with BTCpay, then issue asset, then attach to UTXO, then open sell order for XCP",
        "transaction": "multiple",
        "source": "",
        "params": {
            "json_txs": json.dumps(
                {
                    "transactions": [
                        {
                            "name": "btcpay",
                            "params": {
                                "address": "$ADDRESS_2",
                                "order_match_id": "$ORDER_1_HASH_$ORDER_2_HASH",
                            },
                        },
                        {
                            "name": "issuance",
                            "params": {
                                "address": "$ADDRESS_2",
                                "asset": "MYASSETB",
                                "quantity": 1000 * 10**8,
                                "divisible": True,
                                "description": "My super asset B",
                            },
                        },
                        {
                            "name": "attach",
                            "params": {
                                "address": "$ADDRESS_2",
                                "destination": "$ORDER_1_HASH:1",
                                "asset": "MYASSETB",
                                "quantity": 500 * 10**8,
                            },
                        },
                        {
                            "name": "order",
                            "params": {
                                "address": "$ADDRESS_2",
                                "give_asset": "MYASSETB",
                                "give_quantity": 500 * 10**8,
                                "get_asset": "XCP",
                                "get_quantity": 500 * 10**8,
                                "expiration": 10,
                                "fee_required": 0,
                            },
                        },
                    ],
                    "construct_args": {
                        "no_validate": True,
                    },
                }
            ),
        },
        "controls": [
            {
                "url": "blocks/144/events?event_name=OPEN_ORDER,ORDER_FILLED,ORDER_MATCH_UPDATE,BTC_PAY,DEBIT,CREDIT,ASSET_ISSUANCE,ASSET_CREATION,INCREMENT_TRANSACTION_COUNT,ATTACH_TO_UTXO",
                "result": [
                    {
                        "event": "OPEN_ORDER",
                        "event_index": 275,
                        "params": {
                            "block_index": 144,
                            "expiration": 10,
                            "expire_index": 154,
                            "fee_provided": 30296,
                            "fee_provided_remaining": 30296,
                            "fee_required": 0,
                            "fee_required_remaining": 0,
                            "get_asset": "XCP",
                            "get_quantity": 50000000000,
                            "get_remaining": 50000000000,
                            "give_asset": "MYASSETB",
                            "give_quantity": 50000000000,
                            "give_remaining": 50000000000,
                            "source": "$ADDRESS_2",
                            "status": "open",
                            "tx_hash": "$TX_HASH",
                            "tx_index": 31,
                        },
                        "tx_hash": "$TX_HASH",
                    },
                    {
                        "event": "DEBIT",
                        "event_index": 274,
                        "params": {
                            "action": "open order",
                            "address": "$ADDRESS_2",
                            "asset": "MYASSETB",
                            "block_index": 144,
                            "event": "$TX_HASH",
                            "quantity": 50000000000,
                            "tx_index": 31,
                            "utxo": None,
                            "utxo_address": None,
                        },
                        "tx_hash": "$TX_HASH",
                    },
                    {
                        "event": "ATTACH_TO_UTXO",
                        "event_index": 273,
                        "params": {
                            "asset": "MYASSETB",
                            "block_index": 144,
                            "destination": "$ORDER_1_HASH:1",
                            "fee_paid": 0,
                            "msg_index": 0,
                            "quantity": 50000000000,
                            "source": "$ADDRESS_2",
                            "status": "valid",
                            "tx_hash": "$TX_HASH",
                            "tx_index": 31,
                        },
                        "tx_hash": "$TX_HASH",
                    },
                    {
                        "event": "INCREMENT_TRANSACTION_COUNT",
                        "event_index": 272,
                        "params": {"block_index": 144, "count": 3, "transaction_id": 100},
                        "tx_hash": "$TX_HASH",
                    },
                    {
                        "event": "CREDIT",
                        "event_index": 271,
                        "params": {
                            "address": None,
                            "asset": "MYASSETB",
                            "block_index": 144,
                            "calling_function": "attach to utxo",
                            "event": "$TX_HASH",
                            "quantity": 50000000000,
                            "tx_index": 31,
                            "utxo": "$ORDER_1_HASH:1",
                            "utxo_address": "$ADDRESS_1",
                        },
                        "tx_hash": "$TX_HASH",
                    },
                    {
                        "event": "DEBIT",
                        "event_index": 270,
                        "params": {
                            "action": "attach to utxo",
                            "address": "$ADDRESS_2",
                            "asset": "MYASSETB",
                            "block_index": 144,
                            "event": "$TX_HASH",
                            "quantity": 50000000000,
                            "tx_index": 31,
                            "utxo": None,
                            "utxo_address": None,
                        },
                        "tx_hash": "$TX_HASH",
                    },
                    {
                        "event": "CREDIT",
                        "event_index": 269,
                        "params": {
                            "address": "$ADDRESS_2",
                            "asset": "MYASSETB",
                            "block_index": 144,
                            "calling_function": "issuance",
                            "event": "$TX_HASH",
                            "quantity": 100000000000,
                            "tx_index": 31,
                            "utxo": None,
                            "utxo_address": None,
                        },
                        "tx_hash": "$TX_HASH",
                    },
                    {
                        "event": "ASSET_ISSUANCE",
                        "event_index": 268,
                        "params": {
                            "asset": "MYASSETB",
                            "asset_longname": None,
                            "block_index": 144,
                            "call_date": 0,
                            "call_price": 0.0,
                            "callable": False,
                            "description": "My super asset B",
                            "description_locked": False,
                            "divisible": True,
                            "fee_paid": 50000000,
                            "issuer": "$ADDRESS_1",
                            "locked": False,
                            "quantity": 100000000000,
                            "reset": False,
                            "source": "$ADDRESS_2",
                            "status": "valid",
                            "transfer": True,
                            "tx_hash": "$TX_HASH",
                            "tx_index": 31,
                        },
                        "tx_hash": "$TX_HASH",
                    },
                    {
                        "event": "ASSET_CREATION",
                        "event_index": 267,
                        "params": {
                            "asset_id": "103804245871",
                            "asset_longname": None,
                            "asset_name": "MYASSETB",
                            "block_index": 144,
                        },
                        "tx_hash": "$TX_HASH",
                    },
                    {
                        "event": "DEBIT",
                        "event_index": 266,
                        "params": {
                            "action": "issuance fee",
                            "address": "$ADDRESS_2",
                            "asset": "XCP",
                            "block_index": 144,
                            "event": "$TX_HASH",
                            "quantity": 50000000,
                            "tx_index": 31,
                            "utxo": None,
                            "utxo_address": None,
                        },
                        "tx_hash": "$TX_HASH",
                    },
                    {
                        "event": "BTC_PAY",
                        "event_index": 265,
                        "params": {
                            "block_index": 144,
                            "btc_amount": 110000,
                            "destination": "$ADDRESS_1",
                            "order_match_id": "$ORDER_1_HASH_$ORDER_2_HASH",
                            "source": "$ADDRESS_2",
                            "status": "valid",
                            "tx_hash": "$TX_HASH",
                            "tx_index": 31,
                        },
                        "tx_hash": "$TX_HASH",
                    },
                    {
                        "event": "ORDER_FILLED",
                        "event_index": 264,
                        "params": {"status": "filled", "tx_hash": "$ORDER_2_HASH"},
                        "tx_hash": "$TX_HASH",
                    },
                    {
                        "event": "ORDER_MATCH_UPDATE",
                        "event_index": 263,
                        "params": {
                            "id": "$ORDER_1_HASH_$ORDER_2_HASH",
                            "order_match_id": "$ORDER_1_HASH_$ORDER_2_HASH",
                            "status": "completed",
                        },
                        "tx_hash": "$TX_HASH",
                    },
                    {
                        "event": "CREDIT",
                        "event_index": 262,
                        "params": {
                            "address": "$ADDRESS_2",
                            "asset": "XCP",
                            "block_index": 144,
                            "calling_function": "btcpay",
                            "event": "$TX_HASH",
                            "quantity": 110000,
                            "tx_index": 31,
                            "utxo": None,
                            "utxo_address": None,
                        },
                        "tx_hash": "$TX_HASH",
                    },
                ],
            }
        ],
    },
]
